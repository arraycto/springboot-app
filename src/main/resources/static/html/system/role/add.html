<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
<div id="app">
	<el-form id="ff" label-width="80px">

		<el-form-item label="名称">
			<el-input  name="name"  value=""></el-input>
		</el-form-item>
		<el-form-item label="类型">
			<el-tree
					:data="data2"
					show-checkbox
					ref="tree"
					node-key="id"
					:default-expanded-keys="[2, 3]"
					:default-checked-keys="[5]"
					:props="defaultProps">
			</el-tree>
		</el-form-item>
		<el-form-item>
			<el-button type="primary" @click="submitForm">提交</el-button>
		</el-form-item>
	</el-form>
</div>
</body>
<script type="text/javascript" src="../../js/include.js"></script>
<script>
    new Vue({
        el: '#app',
		data:{
            data2:[],
            defaultProps: {
                children: 'children',
                label: 'text'
            }
		},
        methods: {
            submitForm() {
                var self = this;
                var obj=$("#ff").serializeObject()
                obj.resourcesId=this.$refs.tree.getCheckedKeys().toString()
                $.ajax({
                    url:url+"/system/role/add",
                    type:"post",
                    data:obj,
                    success:function(data){
                        if(data.result=="success"){
                            self.toList();
                        }
                    }
                });
            },toList(){
                window.location=htmlURL+"/system/role/list.html";
            }, cx(){
                var self = this;
                $.ajax({
                    url:url+"/system/resources/list",
                    type:'post',
                    success:function(data){
                        self.data2=data.data;
                    }
                })
            }
        },
        mounted () {
            this.cx();
        }
    })
</script>
</html>