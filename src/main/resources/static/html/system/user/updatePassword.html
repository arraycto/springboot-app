<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
<div id="app">
	<el-form id="ff" label-width="80px">
		<el-form-item label="账户">
			<el-input  name="username" :value="username"></el-input>
		</el-form-item>
		<el-form-item label="密码">
			<el-input  name="password"  value=""></el-input>
		</el-form-item>

		<el-form-item>
			<el-button type="primary" @click="submitForm">提交</el-button>
		</el-form-item>
	</el-form>
</div>
</body>
<script type="text/javascript" src="../../js/include.js"></script>
<script>
    new Vue({
        el: '#app',
		data:{
            username:'',
            password:'',
			id:''
		},
        methods: {
            submitForm() {
                var self = this;
                var obj= $("#ff").serializeObject()
                obj.id=this.id;
                $.ajax({
                    url:url+"/system/user/updatePassword",
                    type:"post",
                    data:obj,
                    success:function(data){
                        if(data.result=="success"){
                            $.ajax({
                                url:url+"/logoutJSON",
                                success:function(data){
                                }
                            });
                            parent.location.href=htmlURL+"/login.html";
                        }
                    }
                });
            },init(){
                var self = this;
                $.ajax({
                    url:url+'/system/user/toUpdatePassword',
                    type:'post',
                    success:function(data){
                        self.username=data.data.username
                        self.password=data.data.password
                        self.id=data.data.id

                    }
                });
			}
        },
        mounted () {
            this.init();
        }
    })
</script>
</html>