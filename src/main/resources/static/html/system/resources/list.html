<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
</head>
<body>
<div id="app">
		<el-tree
				:data="data2"
				show-checkbox
				node-key="id"
				default-expand-all
				:expand-on-click-node="false"
				:props="defaultProps">
      <span class="custom-tree-node" slot-scope="{ node, data }">
        <span>{{ node.label }}</span>
        <span>
          <el-button
				  type="text"
				  size="mini"
				  @click="() => append(data)">
            Append
          </el-button>
			<el-button
					type="text"
					size="mini"
					@click="() => up(data)">
            Update
          </el-button>
          <el-button
				type="text"
				size="mini"
				@click="() => remove(node, data)">
            Delete
          </el-button>
        </span>
      </span>
		</el-tree>
</div>
</body>
<script type="text/javascript" src="../../js/include.js"></script>
<script>

    new Vue({
        el: '#app',
        data:{
            data2:[],
            defaultProps: {
                children: 'children',
                label: 'text'
            }
    	},
        methods: {
            append(data) {
                window.location=htmlURL+'/system/resources/add.html?pid='+data.id
            },

            remove(node, data) {
                $.ajax({
                    url:url+'/system/resources/delete',
                    type:'post',
                    data:"id="+data.id,
                    success:function(data){
                        if(data.result=="success") {
                            window.location = htmlURL + "/system/resources/list.html";
                        }
                    }
                });
            },up(data){
                window.location=htmlURL+'/system/resources/update.html?id='+data.id;
			}, cx(){
                var self = this;
                $.ajax({
                    url:url+"/system/resources/list",
                    type:'post',
                    success:function(data){
                        self.data2=data.data;
                    }
                })
            }
        },
        mounted () {
            this.cx();
        }

    })

</script>
</html>